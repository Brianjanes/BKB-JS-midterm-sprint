<%- include('partials/header') %>
<div class="content-wrapper">
  <main class="homepage-container">
    <h1><%= genre %> Movies</h1>

    <h2>All <%= genre %> Movies</h2>
    <div class="featured-movies-container">
      <% movies.forEach(movie => { %>
      <div class="featured-movie-card">
        <div class="spider-container">
          <div class="spider spider-1"></div>
          <div class="spider spider-2"></div>
          <div class="spider spider-3"></div>
        </div>
        <div class="ghost-container">
          <div class="ghost ghost-1">ðŸ‘»</div>
          <div class="ghost ghost-2">ðŸ‘»</div>
        </div>
        <a href="/movie/<%= movie.id %>" class="featured-movie-link">
          <div class="featured-movie-wrapper">
            <div class="movie-image-container">
              <img
                src="<%= movie.image %>"
                alt="<%= movie.title %>"
                class="movie-image"
                onerror="this.src='/MoviePics/Gladiator.jpg'"
              />
            </div>
            <h2 class="featured-movie-title"><%= movie.title %></h2>
            <div class="featured-movie-metadata">
              <span class="featured-movie-year"><%= movie.releaseYear %></span>
              <% if (movie.rating !== null) { %>
              <span class="featured-movie-score"
                >â˜… <%= movie.rating.toFixed(1) %>/10</span
              >
              <% } else { %>
              <span class="featured-movie-unreleased">Unreleased</span>
              <% } %>
            </div>
          </div>
        </a>
        <% if (movie.reviews && movie.reviews.length > 0) { %>
        <div class="movie-reviews">
          <% movie.reviews.forEach((review, index) => { %>
          <div class="review-item">
            <p class="review-text">"<%= review %>"</p>
            <span class="reviewer">
              - <%= ['CineExpert', 'FilmBuff', 'MovieSage'][index] %>
            </span>
          </div>
          <% }); %>
        </div>
        <% } %>
      </div>
      <% }); %>
    </div>

    <h2>Suggested <%= genre %> Movies</h2>
    <div class="featured-movies-container">
      <% suggestions.forEach(movie => { %>
      <div class="featured-movie-card">
        <div class="spider-container">
          <div class="spider spider-1"></div>
          <div class="spider spider-2"></div>
          <div class="spider spider-3"></div>
        </div>
        <div class="ghost-container">
          <div class="ghost ghost-1">ðŸ‘»</div>
          <div class="ghost ghost-2">ðŸ‘»</div>
        </div>
        <a href="/movie/<%= movie.id %>" class="featured-movie-link">
          <div class="featured-movie-wrapper">
            <div class="movie-image-container">
              <img
                src="<%= movie.image %>"
                alt="<%= movie.title %>"
                class="movie-image"
                onerror="this.src='/MoviePics/Gladiator.jpg'"
              />
            </div>
            <h2 class="featured-movie-title"><%= movie.title %></h2>
            <div class="featured-movie-metadata">
              <span class="featured-movie-year"><%= movie.releaseYear %></span>
              <% if (movie.rating !== null) { %>
              <span class="featured-movie-score"
                >â˜… <%= movie.rating.toFixed(1) %>/10</span
              >
              <% } else { %>
              <span class="featured-movie-unreleased">Unreleased</span>
              <% } %>
            </div>
          </div>
        </a>
        <% if (movie.reviews && movie.reviews.length > 0) { %>
        <div class="movie-reviews">
          <% movie.reviews.forEach((review, index) => { %>
          <div class="review-item">
            <p class="review-text">"<%= review %>"</p>
            <span class="reviewer">
              - <%= ['CineExpert', 'FilmBuff', 'MovieSage'][index] %>
            </span>
          </div>
          <% }); %>
        </div>
        <% } %>
      </div>
      <% }); %>
    </div>
  </main>
</div>
<%- include('partials/footer') %>
